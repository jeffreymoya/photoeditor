{
  "name": "photoeditor-monorepo",
  "private": true,
  "workspaces": [
    "shared",
    "backend",
    "mobile"
  ],
  "scripts": {
    "stage:a": "npm run stage:a:typecheck && npm run stage:a:lint && npm run stage:a:dependencies && npm run stage:a:dead-exports && npm run stage:a:duplication",
    "stage:a:typecheck": "npm run typecheck --prefix backend && npm run typecheck --prefix mobile && npm run typecheck --prefix shared",
    "stage:a:lint": "npm run lint --prefix backend && npm run lint --prefix mobile && npm run lint --prefix shared",
    "stage:a:dependencies": "dependency-cruiser backend/src shared mobile/src --config tooling/dependency-rules.json",
    "stage:a:dead-exports": "ts-prune -p backend/tsconfig.json && ts-prune -p mobile/tsconfig.json && ts-prune -p shared/tsconfig.json",
    "stage:a:duplication": "jscpd --threshold 5 backend/src mobile/src shared",
    "contracts:check": "npm run build --prefix shared && node tooling/contract-check.js",
    "analyze:deps": "dependency-cruiser backend/src shared mobile/src --config tooling/dependency-rules.json --output-type dot | dot -T png > docs/evidence/import-graph.png && dependency-cruiser backend/src shared mobile/src --config tooling/dependency-rules.json --output-type metrics",
    "validate:deps": "dependency-cruiser backend/src shared mobile/src --config tooling/dependency-rules.json --output-type html > docs/evidence/dependency-cruiser-report.html && dependency-cruiser backend/src shared mobile/src --config tooling/dependency-rules.json --validate",
    "test:contracts": "jest --testPathPattern='tests/contracts'",
    "prepare": "husky"
  },
  "devDependencies": {
    "@microsoft/api-extractor": "^7.43.0",
    "dependency-cruiser": "^17.0.1",
    "husky": "^9.1.7",
    "jscpd": "^4.0.5",
    "knip": "^5.0.0",
    "ts-prune": "^0.10.3",
    "typescript": "^5.3.0"
  }
}
