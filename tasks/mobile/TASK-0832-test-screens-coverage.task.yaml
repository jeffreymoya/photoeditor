schema_version: "1.0"
id: TASK-0832
title: "Backfill test coverage for mobile screens (CameraScreen, EditScreen, etc.)"
status: todo
priority: P2
area: mobile
unblocker: false
order: 5
blocked_by: []
depends_on: []

description: >-
  Create basic rendering tests for screens with 0% coverage (CameraScreen, EditScreen,
  GalleryScreen, PreviewScreen). Focus on happy path rendering and navigation per
  standards/testing-standards.md. Complex camera/editing logic defers to E2E tests.

outcome: >-
  Test files created for screens, verifying basic rendering, navigation actions, and
  UI output. Minimal coverage baseline established for screen components.

scope:
  in:
    - mobile/src/screens/__tests__/CameraScreen.test.tsx (new)
    - mobile/src/screens/__tests__/EditScreen.test.tsx (new)
    - mobile/src/screens/__tests__/GalleryScreen.test.tsx (new)
    - mobile/src/screens/__tests__/PreviewScreen.test.tsx (new)
  out:
    - Complex camera integration (manual/E2E testing acceptable)
    - Complex editing workflows (E2E tests)
    - Deep feature logic (covered by hook/service tests)

context:
  affected_packages: [mobile]
  standards_tier: mobile
  related_docs:
    - standards/frontend-tier.md
    - standards/testing-standards.md
  repo_paths:
    - mobile/src/screens
  dependencies: []

environment:
  os: ubuntu-22.04
  runtimes:
    node: "18.x"
  tools:
    - name: pnpm
      version: "8.x"

constraints:
  approvals_required: false
  sandbox:
    filesystem: workspace-write
    network: enabled
  coding_guidelines:
    - Render with minimal providers per standards/testing-standards.md
    - Assert UI output, avoid snapshot-only tests
    - Mock complex platform APIs (camera, filesystem)
  prohibited:
    - No deep feature logic testing (covered by hooks/services)
    - No flaky timing-based assertions

plan:
  - id: 1
    title: Create basic screen tests
    details: >-
      Create tests for CameraScreen, EditScreen, GalleryScreen, PreviewScreen. Focus on
      rendering, navigation actions, and basic UI structure per standards/testing-standards.md.
    actor: agent
    inputs:
      - mobile/src/screens/CameraScreen.tsx
      - mobile/src/screens/EditScreen.tsx
      - mobile/src/screens/GalleryScreen.tsx
      - mobile/src/screens/PreviewScreen.tsx
    outputs:
      - mobile/src/screens/__tests__/CameraScreen.test.tsx
      - mobile/src/screens/__tests__/EditScreen.test.tsx
      - mobile/src/screens/__tests__/GalleryScreen.test.tsx
      - mobile/src/screens/__tests__/PreviewScreen.test.tsx
    definition_of_done:
      - Each screen has basic rendering test
      - Navigation actions tested where applicable
      - UI output verified with @testing-library/react-native
      - Complex platform APIs mocked
    estimate: M
    expected_files_touched:
      - mobile/src/screens/__tests__/CameraScreen.test.tsx
      - mobile/src/screens/__tests__/EditScreen.test.tsx
      - mobile/src/screens/__tests__/GalleryScreen.test.tsx
      - mobile/src/screens/__tests__/PreviewScreen.test.tsx

acceptance_criteria:
  must:
    - Test files created for all screens with 0% coverage
    - Basic rendering and navigation tested per standards/testing-standards.md
    - Complex workflows documented as E2E test candidates
    - pnpm turbo run test --filter=photoeditor-mobile passes
  quality_gates:
    - "Screen tests render with minimal providers"
    - "Platform APIs mocked at boundaries"

validation:
  static_checks:
    - pnpm turbo run lint --filter=photoeditor-mobile
    - pnpm turbo run typecheck --filter=photoeditor-mobile
  unit_tests:
    mobile:
      - pnpm turbo run test --filter=photoeditor-mobile -- --coverage --testPathPattern=screens
  contract_tests: []
  manual_checks:
    - Review E2E test candidates for complex workflows

deliverables:
  - mobile/src/screens/__tests__/CameraScreen.test.tsx
  - mobile/src/screens/__tests__/EditScreen.test.tsx
  - mobile/src/screens/__tests__/GalleryScreen.test.tsx
  - mobile/src/screens/__tests__/PreviewScreen.test.tsx

risks:
  - description: Camera/editing screens have complex platform integration
    mitigation: Mock platform APIs, document E2E test needs
